[general]
;Quantumult X ä¼šå¯¹ server_check_url æŒ‡å®šçš„ç½‘å€è¿›è¡Œç›¸åº”æµ‹è¯•ï¼Œä»¥ç¡®è®¤èŠ‚ç‚¹çš„å¯ç”¨æ€§
;ä½ åŒæ ·å¯ä»¥åœ¨ server_local/remote ä¸­ï¼Œä¸ºèŠ‚ç‚¹ã€è®¢é˜…å•ç‹¬æŒ‡å®šserver_check_urlå‚æ•°
;å¦‚æ‚¨ä¸ºèŠ‚ç‚¹å•ç‹¬æŒ‡å®šäº† urlï¼Œåˆ™æ‰€æœ‰ç›¸å…³å»¶è¿Ÿæµ‹è¯•ä¸­ï¼Œå‡ä¼šé‡‡ç”¨æ­¤ url åœ°å€
server_check_url= http://www.qualcomm.cn/generate_204
;èŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•è¶…æ—¶å‚æ•°ï¼Œéœ€å°äº 5000 æ¯«ç§’æ‰ç”Ÿæ•ˆ
server_check_timeout=2000
# > ç”¨äºCheckèŠ‚ç‚¹IPåœ°å€(ä»¥ä¸‹geo_location_checkerä»»é€‰ä¸€ä¸ªå³å¯)
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js
;geo_location_checker=http://api.live.bilibili.com/ip_service/v1/ip_service/get_ip_addr? , https://cdn.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/IP_bili_cn.js
;geo_location_checker=http://ifconfig.co/json, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IPConfig.js
;geo_location_checker= http://extreme-ip-lookup.com/json/, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IPCheck.js
;geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/GeoLocationChecker/QuantumultX/IP-API.js
# > åŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ï¼Œç”¨äºå¼•ç”¨èµ„æºçš„è½¬æ¢
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
# > ç¬¬ä¸€ä¸ªfilterä¸º4gæ¨¡å¼å¼€å¯è§„åˆ™åˆ†æµï¼Œç¬¬äºŒä¸ªfilterä¸ºå…¶ä»–wifiä¸‹å¼€å¯è§„åˆ™åˆ†æµï¼Œç¬¬ä¸‰ä¸ªwifi1ä¿®æ”¹æˆä½ è·¯ç”±å™¨ç¿»å¢™çš„wifiåå¼€å¯ç›´è¿æ¨¡å¼ï¼Œç¬¬å››ä¸ªwifi2ä¸ºä½ å…¬å¸æˆ–è€…å…¶ä»–æœ‰è·¯ç”±å™¨ç¿»å¢™çš„WiFiåèµ°ç›´è¿ï¼‰
# > é»˜è®¤å…³é—­æ ¹æ®wifiåˆ‡æ¢æ¨¡å¼ï¼Œå¦‚éœ€å¼€å¯ï¼Œåˆ é™¤ä¸‹æ–¹çš„"#"å³å¯
running_mode_trigger=filter, filter, Galaxy Note8:all_proxy
# å‚æ•° fallback_udp_policy ä»…æ”¯æŒ v1.0.19 ä»¥åŠä¹‹åçš„ç‰ˆæœ¬ã€‚
# å‚æ•° fallback_udp_policy çš„å€¼ä»…æ”¯æŒæœ«ç«¯ç­–ç•¥ï¼ˆæœ«ç«¯ç­–ç•¥ä¸ºç»ç”±è§„åˆ™æ¨¡å—å’Œç­–ç•¥æ¨¡å—åæ‰€å‘½ä¸­çš„ç­–ç•¥ï¼Œä¾‹å¦‚ï¼šdirectã€reject ä»¥åŠèŠ‚ç‚¹ï¼›ä¸æ”¯æŒå†…ç½®ç­–ç•¥ proxy ä»¥åŠå…¶å®ƒè‡ªå®šä¹‰ç­–ç•¥ï¼‰ã€‚
fallback_udp_policy=direct
;ä¸‹åˆ—è¡¨ä¸­çš„å†…å®¹å°†ä¸ç»è¿‡ QuantumultXçš„å¤„ç†ï¼Œè®¾ç½®åå»ºè®®é‡å¯è®¾å¤‡
excluded_routes=239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32
;UDP ç™½åå•ï¼Œç•™ç©ºåˆ™é»˜è®¤æ‰€æœ‰ä¸ºç«¯å£ã€‚ä¸åœ¨udpç™½åå•åˆ—è¡¨ä¸­çš„ç«¯å£ï¼Œå°†è¢«ä¸¢å¼ƒå¤„ç†ï¼ˆè¿”å› ICMP  â€œç«¯å£ä¸å¯è¾¾â€ ä¿¡æ¯ï¼‰ã€‚
udp_whitelist=1-442, 444-65535

;dns exclusion listä¸­çš„åŸŸåå°†ä¸ä½¿ç”¨fake-ipæ–¹å¼. å…¶å®ƒåŸŸååˆ™å…¨éƒ¨é‡‡ç”¨ fake-ip åŠè¿œç¨‹è§£æçš„æ¨¡å¼
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com

[dns]
; ç¦ç”¨ç³»ç»Ÿ DNSï¼ˆno-systemï¼‰ ä»¥åŠ ipv6
;no-system
no-ipv6
; å¦‚éœ€ä½¿ç”¨ DoH3ï¼ŒDNS over HTTP/3ï¼Œè¯·å¼€å¯ä¸‹é¢ğŸ‘‡å‚æ•°
prefer-doh3

;æŒ‡å®š dns æœåŠ¡å™¨ï¼Œå¹¶å‘å“åº”é€‰å–æœ€ä¼˜ç»“æœ
server=119.29.29.29
server=223.5.5.5
;å¦‚æŒ‡å®š doh æœåŠ¡ï¼Œåˆ™ğŸ‘†ï¸ä¸Šé¢çš„ä¸€èˆ¬ dns è§£æå‡å¤±æ•ˆ é¢å¤–å‚æ•°ï¼Œåœ¨ç‰¹å®šç½‘ç»œä¸‹ç¦ç”¨è¯¥ doh
doh-server = https://223.5.5.5/dns-query, https://223.6.6.6/dns-query

address=/mtalk.google.com/108.177.125.188
server=/dl.google.com/119.29.29.29
server=/dl.l.google.com/119.29.29.29
server=/update.googleapis.com/119.29.29.29
server=/*.dl.playstation.net/119.29.29.29
server=/amplifi.lan/system
server=/router.synology.com/system
server=/sila.razer.com/system
server=/router.asus.com/system
server=/routerlogin.net/system
server=/orbilogin.com/system
server=/www.LinksysSmartWiFi.com/system
server=/LinksysSmartWiFi.com/system
server=/myrouter.local/system
server=/www.miwifi.com/system
server=/miwifi.com/system
server=/mediarouter.home/system
server=/tplogin.cn/system
server=/tplinklogin.net/system
server=/melogin.cn/system
server=/falogin.cn/system

#ä»¥ä¸‹ä¸ºç­–ç•¥ç»„[policy]éƒ¨åˆ†
# static ç­–ç•¥ç»„ä¸­ï¼Œä½ éœ€è¦æ‰‹åŠ¨é€‰æ‹©æƒ³è¦çš„èŠ‚ç‚¹/ç­–ç•¥ç»„ã€‚
# available ç­–ç•¥ç»„å°†æŒ‰é¡ºåºé€‰æ‹©ä½ åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹ã€‚
# round-robin ç­–ç•¥ç»„ï¼Œå°†æŒ‰åˆ—è¡¨çš„é¡ºåºè½®æµä½¿ç”¨å…¶ä¸­çš„èŠ‚ç‚¹ã€‚
# url-latency-benchmark å»¶è¿Ÿç­–ç•¥ç»„ï¼Œé€‰å–å»¶è¿Ÿæœ€ä¼˜èŠ‚ç‚¹ã€‚
# dest-hash ç­–ç•¥ç»„ï¼Œéšæœºè´Ÿè½½å‡è¡¡ï¼Œä½†ç›¸åŒåŸŸåèµ°å›ºå®šèŠ‚ç‚¹ã€‚
# ssid ç­–ç•¥ç»„ï¼Œå°†æ ¹æ®ä½ æ‰€è®¾å®šçš„ç½‘ç»œæ¥è‡ªåŠ¨åˆ‡æ¢èŠ‚ç‚¹/ç­–ç•¥ç»„
;img-url å‚æ•°ç”¨äºæŒ‡å®šç­–ç•¥ç»„å›¾æ ‡ï¼Œå¯è¿œç¨‹ï¼Œä¹Ÿå¯æœ¬åœ°/iCloud(Quantumult X/Imagesè·¯å¾„ä¸‹) ï¼ˆ108*108 å¤§å°ï¼‰
;direct/proxy/reject åˆ™åªèƒ½ç”¨æœ¬åœ°å›¾æ ‡ï¼Œåå­—åˆ†åˆ«ä¸º direct.png, proxy.png,reject.png æ”¾ç½®äº Images æ–‡ä»¶å¤¹ä¸‹å³å¯ç”Ÿæ•ˆ (108*108 å¤§å°)
[policy]
static=å…¨å±€ä»£ç†, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png
static=å…¨å±€ç›´è¿, direct, server-tag-regex=(?=.*(ä¸­|CN|)), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Direct.png
static=è‹¹æœæœåŠ¡, direct, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png
static=æ¸¯å°ç•ªå‰§, direct, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili_3.png
static=ç½‘æ˜“äº‘éŸ³ä¹, direct, server-tag-regex=(?=.*(music|ğŒğ®ğ¬ğ¢ğœ|Unbolck|ç½‘æ˜“äº‘|äº‘éŸ³ä¹|Music|Netease|ğŸ¶|è§£é”)), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netease_Music_Unlock.png
static=é»‘ç™½åå•, å…¨å±€ä»£ç†, direct, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png
url-latency-benchmark=é¦™æ¸¯èŠ‚ç‚¹, server-tag-regex=(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=0, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
url-latency-benchmark=å°æ¹¾èŠ‚ç‚¹, server-tag-regex=(?=.*(å°|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=0, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Taiwan.png
url-latency-benchmark=æ—¥æœ¬èŠ‚ç‚¹, server-tag-regex=(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=0, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png
url-latency-benchmark=ç‹®åŸèŠ‚ç‚¹, server-tag-regex=(?=.*(æ–°|ç‹®|ç…|SG|(?i)Singapore))^((?!(æ¸¯|å°|æ—¥|éŸ©|ç¾)).)*$, check-interval=600, tolerance=0, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
url-latency-benchmark=ç¾å›½èŠ‚ç‚¹, server-tag-regex=(?=.*(ç¾|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$, check-interval=600, tolerance=0, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png
#ä¸‹é¢æ˜¯ssidç­–ç•¥ç»„ç¤ºèŒƒ ç­–ç•¥ç»„å, èœ‚çªç½‘ç»œ, WIFI, LINK_22E171:Sample-B, LINK_22E172:Sample-C
ssid=SSID Auto Mode, å…¨å±€ç›´è¿, direct, Galaxy Note8:æ‰‹æœºçƒ­ç‚¹, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/SSID.png

[server_local]

[server_remote]
# æ·»åŠ ç½‘æ˜“äº‘è§£é”èŠ‚ç‚¹æµ‹é€Ÿ server_check_url=http://interface3.music.163.com

[filter_remote]
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list, tag=æœ¬åœ°å±€åŸŸç½‘, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/NetEaseMusic/NetEaseMusic.list, tag=è§£é”ç½‘æ˜“äº‘éŸ³ä¹, force-policy=ç½‘æ˜“äº‘éŸ³ä¹, update-interval=-1, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, tag=è§„åˆ™ä¿®æ­£, force-policy=direct, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AdvertisingLite/AdvertisingLite.list, tag=å¹¿å‘Šæ‹¦æˆª, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list, tag=è¿è¥åŠ«æŒ, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy.list, tag=éšç§ä¿æŠ¤, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/SystemOTA/SystemOTA.list, tag=iOSç³»ç»Ÿå‡çº§, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/rule/tieba-ad-qx.list, tag=è´´å§å»å¹¿å‘Š, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/HK.list, tag=æµåª’ä½“HK, force-policy=é¦™æ¸¯èŠ‚ç‚¹, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/TW.list, tag=æµåª’ä½“TW, force-policy=å°æ¹¾èŠ‚ç‚¹, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/JP.list, tag=æµåª’ä½“JP, force-policy=æ—¥æœ¬èŠ‚ç‚¹, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/US.list, tag=æµåª’ä½“US, force-policy=ç¾å›½èŠ‚ç‚¹, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list, tag=å…¨å±€ä»£ç†, force-policy=å…¨å±€ä»£ç†, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/StreamingSE.list, tag=æ¸¯å°ç•ªå‰§, force-policy=æ¸¯å°ç•ªå‰§, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list, tag=ç”µæŠ¥æ¶ˆæ¯, force-policy=å…¨å±€ä»£ç†, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global.list, tag=å…¨å±€ä»£ç†, force-policy=å…¨å±€ä»£ç†, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list, tag=è‹¹æœæœåŠ¡, force-policy=è‹¹æœæœåŠ¡, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China.list, tag=å›½å†…ç½‘ç«™, force-policy=å…¨å±€ç›´è¿, update-interval=86400, opt-parser=true, enabled=true

[filter_local]
# è´´å§ADå¤„ç†
HOST,im.tieba.baidu.com,REJECT
# local
host-suffix, local, direct
ip-cidr, 203.107.1.1/24, reject
geoip, cn, å…¨å±€ç›´è¿
final, é»‘ç™½åå•

[rewrite_local]

[rewrite_remote]
# è§£é”ä¼šå‘˜
https://subweb.s3.fr-par.scw.cloud/Module/embyUnlocked.conf, tag=embyè§£é”ä¼šå‘˜æƒé™
https://github.com/ddgksf2013/Cuttlefish/raw/master/Rewrite/UnlockVip/Rrtv.conf, tag=äººäººè§†é¢‘VIP@ddgksf2013
https://github.com/ddgksf2013/Cuttlefish/raw/master/Rewrite/AdBlock/Bilibili.conf, tag=Bç«™å»å¹¿å‘Š+1080Pé«˜ç ç‡@ddgksf2013

# è½¯ä»¶å¢å¼º
https://raw.githubusercontent.com/ddgksf2013/Cuttlefish/master/Rewrite/UnlockVip/BaiduCloud.conf, tag=ç™¾åº¦ç½‘ç›˜å€é€Ÿ@ddgksf2013
https://raw.githubusercontent.com/zZPiglet/Task/master/UnblockURLinWeChat.conf, tag=å¾®ä¿¡è§£é”è¢«å±è”½çš„URL@zZPiglet
https://raw.githubusercontent.com/Orz-3/QuantumultX/master/JD_TB_price.conf, tag=æ¯”ä»·è„šæœ¬@Orz-3

# åº”ç”¨å»å¹¿å‘Š
https://raw.githubusercontent.com/ddgksf2013/Cuttlefish/master/Rewrite/AdBlock/StartUp.conf, tag=åº”ç”¨å»å¼€å±å¹¿å‘Š@ddgksf2013
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.qxrewrite, tag=ä»€ä¹ˆå€¼å¾—ä¹°å»å¹¿å‘Š@blackmatrix7
https://github.com/app2smile/rules/raw/master/module/tieba-qx.conf, tag=ç™¾åº¦è´´å§è¶…çº§å»å¹¿å‘Š@app2smile
https://raw.githubusercontent.com/ddgksf2013/Cuttlefish/master/Applet/QuanX.conf, tag=å¾®ä¿¡å°ç¨‹åºå»å¹¿å‘Š@ddgksf2013
https://github.com/zmqcherish/proxy-script/raw/main/weibo.conf, tag=å¾®åšå»å¹¿å‘Š@zmqcherish

# é€šç”¨å»å¹¿å‘Š
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/AdvertisingPlus.conf, tag=å»å¹¿å‘Šè„šæœ¬@DivineEngine
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/Advertising.conf, tag=å»å¹¿å‘Šé‡å†™@DivineEngine
https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/Rewrite_lhie1.conf, tag=å»å¹¿å‘Šé‡å†™@lhie1
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/General.conf, tag=ç¥æœºé‡å®šå‘@DivineEngine

# ç½‘é¡µä¼˜åŒ–
https://raw.githubusercontent.com/ddgksf2013/Cuttlefish/master/Rewrite/Function/Q-Search.conf, tag=Safariè¶…çº§æœç´¢@ddgksf2013

https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJSå•†åº—ç‰ˆ@chavyleung

[task_local]
# è¯·æ‰‹åŠ¨æ·»åŠ ä¸‹é¢çš„è®¢é˜…ï¼ˆæµåª’ä½“Taskè®¢é˜…é›†åˆï¼‰
; https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/UI-Action.json
# æµåª’ä½“è§£é”æŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=æµåª’ä½“è§£é”æŸ¥è¯¢, img-url=arrowtriangle.right.square.system, enabled=true

[http_backend]

[mitm]
skip_validating_cert = true
